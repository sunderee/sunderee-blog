<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sunderee Blog - Bringing Kotlin&#039;s Scope Functions To Dart</title>



<link rel="canonical" href="https://sunderee.github.io/sunderee-blog/posts/bringing-kotlins-scope-functions-to-dart.html">
<meta name="twitter:title" content="Sunderee Blog - Bringing Kotlin&#039;s Scope Functions To Dart">
<meta name="description" content="Tiny gem that I simply can&#039;t live without and need dearly">
<meta name="author" content="Peter Aleksander Bizjak">
<meta name="keywords" content="Dart">
<meta name="url" content="https://sunderee.github.io/sunderee-blog/posts/bringing-kotlins-scope-functions-to-dart.html">
<meta property="og:title" content="Sunderee Blog - Bringing Kotlin&#039;s Scope Functions To Dart">
<meta property="og:url" content="https://sunderee.github.io/sunderee-blog/posts/bringing-kotlins-scope-functions-to-dart.html">
<meta property="og:article:published_time" content="2023-06-09T17:15:00+00:00">
<meta property="og:type" content="article">


<link rel="sitemap" href="https://sunderee.github.io/sunderee-blog/sitemap.xml" type="application/xml" title="Sitemap">
<link rel="alternate" href="https://sunderee.github.io/sunderee-blog/feed.xml" type="application/rss+xml" title="HydePHP RSS Feed">
<meta name="twitter:creator" content="@peteralexbizjak">
<meta name="generator" content="HydePHP v1.1.0">
<meta property="og:site_name" content="Sunderee Blog">




<style>[x-cloak] {display: none!important}</style>


    <link rel="stylesheet" href="../media/app.css?v=ca99205ed438f1c291d827396d5adafb">





    
    <meta id="meta-color-scheme" name="color-scheme" content="light">
    <script>if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) { document.documentElement.classList.add('dark'); document.getElementById('meta-color-scheme').setAttribute('content', 'dark');} else { document.documentElement.classList.remove('dark') } </script>
</head>
<body id="app" class="flex flex-col min-h-screen overflow-x-hidden dark:bg-gray-900 dark:text-white" x-data="{ navigationOpen: false }" x-on:keydown.escape="navigationOpen = false;">
    <a href="#content" id="skip-to-content" class="sr-only focus:not-sr-only bg-black border-4 border-yellow-400 focus:absolute focus:mt-2 focus:mx-auto focus:p-2 focus:w-64 h-auto left-0 overflow-auto right-0 rounded-md text-center text-lg text-white top-auto z-50 ">Skip to content</a>    <nav aria-label="Main navigation" id="main-navigation" class="flex flex-wrap items-center justify-between p-4 shadow-lg sm:shadow-xl md:shadow-none dark:bg-gray-800">
    <div class="flex flex-grow items-center flex-shrink-0 text-gray-700 dark:text-gray-200">
        <a href="../index.html" class="font-bold px-4" aria-label="Home page">
    Sunderee Blog
</a>
        <div class="ml-auto">
            <button @click="toggleTheme" class="theme-toggle-button flex items-center px-2 py-1 hover:text-gray-700 dark:text-gray-200" title="Toggle theme">
        <span class="sr-only">Toggle dark theme</span>
        <svg width="1.25rem" height="1.25rem" class="w-5 h-5 hidden dark:block" fill="#FFFFFF" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
        <svg width="1.25rem" height="1.25rem" class="w-5 h-5 block dark:hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
    </button>
        </div>
    </div>

    <div class="block md:hidden">
        <button id="navigation-toggle-button" class="flex items-center px-3 py-1 hover:text-gray-700 dark:text-gray-200"
                aria-label="Toggle navigation menu" @click="navigationOpen = ! navigationOpen">
            <svg x-show="! navigationOpen" title="Open Navigation Menu" class="dark:fill-gray-200"
                 style="display: block;"
                 id="open-main-navigation-menu-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24"
                 width="24"><title>Open Menu</title>
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
            </svg>
            <svg x-show="navigationOpen" title="Close Navigation Menu" class="dark:fill-gray-200" style="display: none;"
                 id="close-main-navigation-menu-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24"
                 width="24"><title>Close Menu</title>
                <path d="M0 0h24v24H0z" fill="none"></path>
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
            </svg>
        </button>
    </div>

    <div id="main-navigation-links" class="w-full x-uncloak-md md:flex flex-grow md:flex-grow-0 md:items-center md:w-auto px-6 -mx-4 border-t mt-3 pt-3 md:border-none md:mt-0 md:py-0 border-gray-200 dark:border-gray-700"
         :class="navigationOpen ? '' : 'hidden'" x-cloak>
        <ul aria-label="Navigation links" class="md:flex-grow md:flex justify-end">
                            <li class="md:mx-2">
                                            <a href="../index.html"  class="block my-2 md:my-0 md:inline-block py-1 text-gray-700 hover:text-gray-900 dark:text-gray-100">Home</a>                                    </li>
                            <li class="md:mx-2">
                                            <a href="../about.html"  class="block my-2 md:my-0 md:inline-block py-1 text-gray-700 hover:text-gray-900 dark:text-gray-100">About</a>                                    </li>
                    </ul>
    </div>
</nav>
    <section>
        
    <main id="content" class="mx-auto max-w-7xl py-16 px-8">
        <article aria-label="Article" id="bringing-kotlins-scope-functions-to-dart" itemscope
         itemtype="https://schema.org/Article"
    class="post-article mx-auto prose dark:prose-invert torchlight-enabled">
    <meta itemprop="identifier" content="bringing-kotlins-scope-functions-to-dart">
            <meta itemprop="url" content="https://sunderee.github.io/sunderee-blog/posts/bringing-kotlins-scope-functions-to-dart.html">
    
    <header aria-label="Header section" role="doc-pageheader">
        <h1 itemprop="headline" class="mb-4">Bringing Kotlin&#039;s Scope Functions To Dart</h1>
        <div id="byline" aria-label="About the post" role="doc-introduction">
            Posted <time itemprop="dateCreated datePublished" datetime="2023-06-09T17:15:00+00:00" title="Friday Jun 9th, 2023, at 5:15pm">Jun 9th, 2023</time>            by author
<address itemprop="author" itemscope itemtype="https://schema.org/Person" aria-label="The post author" style="display: inline;">
                <span itemprop="name" aria-label="The author's name" title=@Peter+Aleksander+Bizjak>Peter Aleksander Bizjak</span>
            </address>            in the category "Dart"        </div>
    </header>
        <div aria-label="Article body" itemprop="articleBody">
        <p>In the world of programming, one cannot escape the beauty and artistry that the right tools and paradigms bring to the table. As programmers, we often find ourselves falling in love with certain features of the languages we use. When we switch to a different language, we sometimes miss those features and wonder why they aren't available. This is a story about one such feature from Kotlin, the versatile and elegant &quot;scope functions,&quot; and an attempt to bring their magic into the world of Dart.</p>
<p>Kotlin, a statically typed programming language from JetBrains, offers a feature known as &quot;scope functions.&quot; These are functions that allow you to execute a block of code within the context of an object. They're designed to make your code more concise, readable, and expressive by allowing you to structure your code in a way that minimizes unnecessary verbosity.</p>
<p>There are five scope functions in Kotlin: <code>let</code>, <code>run</code>, <code>with</code>, <code>apply</code>, and <code>also</code>. Each of these functions takes a receiver (an object to which the function is applied), and a block of code, which is executed in the context of the receiver. The main differences between these functions lie in the way they handle the receiver object and the value they return.</p>
<p>For instance, the <code>also</code> and <code>let</code> functions can be used to perform additional operations on an object, such as configuration or transformation, and then return the object itself (<code>also</code>) or the result of the transformation (<code>let</code>). On the other hand, <code>takeIf</code> and <code>takeUnless</code> help in writing expressive conditional statements by returning the object they were invoked on if it satisfies or does not satisfy a given predicament, respectively.</p>
<p>Dart, the language that powers Flutter, Google's UI toolkit for building natively compiled applications, was designed with different goals in mind compared to Kotlin. Dart aims for simplicity, familiarity, and ease of use, especially for JavaScript developers. It prioritizes fast, ahead-of-time (AOT) compilation to efficient machine code, which makes it a great fit for mobile and web applications.</p>
<p>While Dart does offer many modern language features, it doesn't include Kotlin's scope functions out of the box. This isn't necessarily due to an oversight or lack of capability, but rather a matter of design philosophy. Dart's creators opted for a more streamlined syntax and a smaller set of core language features to lower the learning curve and improve accessibility for new developers.</p>
<p>Comparing Kotlin and Dart is akin to comparing apples and oranges. While both are modern, powerful programming languages, they serve different ecosystems and are optimized for different use cases. Kotlin, with its expressive syntax and rich feature set, is a favorite among Android developers and is also gaining popularity in backend development. On the other hand, Dart's simplicity, combined with the power of Flutter, makes it a strong contender in the world of cross-platform app development.</p>
<p>Therefore, it isn't entirely fair to directly compare these two languages. Each has its strengths and weaknesses and is suited to particular scenarios. However, that doesn't mean we can't borrow ideas from one language to enhance our experience with another.</p>
<h2>Dart Scope Functions</h2>
<p>Enter the <a href="https://pub.dev/packages/dart_scope_functions"><code>dart_scope_functions</code></a> library. As a long-time Kotlin developer who's switched to Dart, I've missed the conciseness and expressiveness that Kotlin's scope functions provide. This library brings these beloved Kotlin features to Dart, allowing you to enjoy the benefits of scope functions in your Dart code.</p>
<p>With <code>dart_scope_functions</code>, you can write more expressive and less verbose code. You can perform additional operations on an object and return either the object itself (<code>also</code>) or the result of an operation (<code>let</code>). Similarly, you can use <code>takeIf</code> and <code>takeUnless</code> to make your conditional statements more readable. Furthermore, you can use <code>run</code> to execute a block of code without the context of an object. In short, this library is intended to make your Dart code more expressive, more concise, and more fun to write, just like in Kotlin.</p>
<h3>Mini Documentation</h3>
<p>Let's delve into each of the scope functions I've created.</p>
<h4><code>also</code></h4>
<p>The <code>also</code> function is used to perform additional operations on an object within a block of code. Here's how it's defined:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">also</span><span style="color: #A6ACCD;">(</span><span style="color: #C792EA;">void</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> it) block) {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">2</span><span style="color: #A6ACCD;">  block</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">(this)</span><span style="color: #89DDFF;">;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">3</span><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> this</span><span style="color: #89DDFF;">;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">4</span><span style="color: #A6ACCD;">}</span></div></code></pre>
<p><code>also</code> takes a function <code>block</code> as a parameter, which performs operations on the object it's called on (accessible within the block as <code>it</code>). After executing the <code>block</code>, <code>also</code> returns the original object (<code>this</code>). This function is beneficial for chaining operations on an object without modifying the object itself.</p>
<p>For example, you might want to log some information about an object before proceeding with other operations:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #C792EA;">var</span><span style="color: #A6ACCD;"> user </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">User</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">also</span><span style="color: #A6ACCD;">((it) </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">print</span><span style="color: #A6ACCD;">(</span><span style="color: #C3E88D;">&#39;Created user with id: ${</span><span style="color: #A6ACCD;">it</span><span style="color: #C3E88D;">.</span><span style="color: #A6ACCD;">id</span><span style="color: #C3E88D;">}&#39;</span><span style="color: #A6ACCD;">))</span><span style="color: #89DDFF;">;</span></div></code></pre>
<p>In this case, <code>also</code> allows you to log the user's id without interrupting the chain of operations.</p>
<h4><code>let</code></h4>
<p>The <code>let</code> function transforms an object into another:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #FFCB6B;">R</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">let</span><span style="color: #A6ACCD;">&lt;</span><span style="color: #FFCB6B;">R</span><span style="color: #89DDFF;">&gt;</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">R</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> it) block) {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">2</span><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> block</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">(this)</span><span style="color: #89DDFF;">;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">3</span><span style="color: #A6ACCD;">}</span></div></code></pre>
<p><code>let</code> also takes a function <code>block</code> as a parameter. However, unlike <code>also</code>, <code>let</code> transforms <code>this</code> into a new object and then returns that new object. This can be useful when you need to transform an object into another as part of a chain of operations:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #C792EA;">var</span><span style="color: #A6ACCD;"> userId </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">User</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">let</span><span style="color: #A6ACCD;">((it) </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> it</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">id)</span><span style="color: #89DDFF;">;</span></div></code></pre>
<p>Here, <code>let</code> transforms a <code>User</code> object into a <code>userId</code>, which can then be used in subsequent operations.</p>
<h4><code>takeIf</code></h4>
<p>The <code>takeIf</code> function returns an object if it satisfies a certain condition:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #FFCB6B;">T</span><span style="color: #89DDFF;">?</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">takeIf</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">bool</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> it) predicament) {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">2</span><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> predicament</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">(this) </span><span style="color: #89DDFF;">?</span><span style="color: #A6ACCD;"> this </span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">null;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">3</span><span style="color: #A6ACCD;">}</span></div></code></pre>
<p><code>takeIf</code> takes a function <code>predicament</code> as a parameter, which should return a boolean value. If the <code>predicament</code> returns <code>true</code> for the object <code>takeIf</code> is called on, <code>takeIf</code> returns the object. Otherwise, it returns <code>null</code>. This can be useful for conditional filtering of objects:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #C792EA;">var</span><span style="color: #A6ACCD;"> activeUser </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> user</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">takeIf</span><span style="color: #A6ACCD;">((it) </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> it</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">isActive)</span><span style="color: #89DDFF;">;</span></div></code></pre>
<p>In this example, <code>takeIf</code> returns the <code>user</code> if the user is active. Otherwise, it returns <code>null</code>.</p>
<h4><code>takeUnless</code></h4>
<p>The <code>takeUnless</code> function is the opposite of <code>takeIf</code>:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #FFCB6B;">T</span><span style="color: #89DDFF;">?</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">takeUnless</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">bool</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> it) predicament) {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">2</span><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> predicament</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">(this) </span><span style="color: #89DDFF;">?</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">null</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> this</span><span style="color: #89DDFF;">;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">3</span><span style="color: #A6ACCD;">}</span></div></code></pre>
<p><code>takeUnless</code> also takes a function <code>predicament</code> as a parameter. If the <code>predicament</code> returns <code>false</code> for the object <code>takeUnless</code> is called on, <code>takeUnless</code> returns the object. Otherwise, it returns <code>null</code>. This is useful when you want to exclude certain objects based on a condition:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #C792EA;">var</span><span style="color: #A6ACCD;"> inactiveUser </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> user</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">takeUnless</span><span style="color: #A6ACCD;">((it) </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> it</span><span style="color: #89DDFF;">.</span><span style="color: #A6ACCD;">isActive)</span><span style="color: #89DDFF;">;</span></div></code></pre>
<p>In this case, <code>takeUnless</code> returns the <code>user</code> if the user is inactive (i.e., not active).</p>
<h4><code>run</code></h4>
<p>Finally, the <code>run</code> function is used to execute a block of code:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #FFCB6B;">R</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">run</span><span style="color: #A6ACCD;">&lt;</span><span style="color: #FFCB6B;">R</span><span style="color: #89DDFF;">&gt;</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">R</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">() block) </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> block</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">;</span></div></code></pre>
<p><code>run</code> takes a function <code>block</code> as a parameter and simply executes it. This function doesn't operate on an object like the others. Instead, it's a standalone function that's used to execute a block of code that doesn't require an object context.</p>
<h2>Limitations</h2>
<p>Dart, like many other languages, has limitations that stem from its design and syntax, one of which is the absence of a direct replacement for Kotlin's <code>this</code> scope functions such as <code>apply</code> and <code>with</code>. The reasons behind these limitations lie in Dart's language design and its type system.</p>
<p>In Kotlin, <code>apply</code> and <code>with</code> are used to refer to the context object by <code>this</code> within the block of code. Here's an example in Kotlin:</p>
<pre><code data-theme="material-theme-palenight" data-lang="kotlin" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #C792EA;">val</span><span style="color: #A6ACCD;"> adam </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Person</span><span style="color: #89DDFF;">(</span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">Adam</span><span style="color: #89DDFF;">&quot;</span><span style="color: #89DDFF;">).</span><span style="color: #82AAFF;">apply</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">{</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">2</span><span style="color: #F07178;">    age </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #F78C6C;">20</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">3</span><span style="color: #F07178;">    city </span><span style="color: #89DDFF;">=</span><span style="color: #F07178;"> </span><span style="color: #89DDFF;">&quot;</span><span style="color: #C3E88D;">London</span><span style="color: #89DDFF;">&quot;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">4</span><span style="color: #89DDFF;">}</span></div></code></pre>
<p>In this example, <code>apply</code> lets you refer to the <code>Person</code> object as <code>this</code> within its block, allowing you to directly access and modify its properties.</p>
<p>However, in Dart, you cannot modify the <code>this</code> context within a function or an extension method. In Dart, <code>this</code> always refers to the current instance of the class where <code>this</code> is used. Unlike Kotlin, Dart doesn't have a language feature that allows changing the meaning of <code>this</code> within a particular scope.</p>
<p>This is primarily because Dart, unlike Kotlin, doesn't have a feature for &quot;<a href="https://kotlinlang.org/docs/lambdas.html#function-literals-with-receiver">function literals with receiver</a>&quot;, which are essentially functions that can be called on a receiver object. The <code>apply</code> and <code>with</code> functions in Kotlin are examples of such function literals with receiver.</p>
<p>In Dart, you could use cascades (<code>..</code>) as a workaround for this limitation. Cascades allow you to perform a series of operations on a single object. However, cascades don't work exactly the same way as <code>apply</code> or <code>with</code> in Kotlin. Here's the equivalent of the above Kotlin code in Dart using cascades:</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">1</span><span style="color: #C792EA;">var</span><span style="color: #A6ACCD;"> adam </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Person</span><span style="color: #A6ACCD;">(</span><span style="color: #C3E88D;">&quot;Adam&quot;</span><span style="color: #A6ACCD;">)</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">2</span><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">..</span><span style="color: #A6ACCD;">age </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #F78C6C;">20</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">3</span><span style="color: #A6ACCD;">  </span><span style="color: #89DDFF;">..</span><span style="color: #A6ACCD;">city </span><span style="color: #89DDFF;">=</span><span style="color: #A6ACCD;"> </span><span style="color: #C3E88D;">&quot;London&quot;</span><span style="color: #89DDFF;">;</span></div></code></pre>
<p>In this example, you can see that the Dart cascade <code>..</code> allows you to perform a series of operations on the <code>Person</code> object, similar to the <code>apply</code> function in Kotlin.</p>
<p>In conclusion, due to the design of Dart's type system and language features, you cannot implement a direct equivalent of Kotlin's <code>apply</code> or <code>with</code> functions that change the meaning of <code>this</code>. However, Dart provides other language features, such as cascades, which can be used to achieve similar functionality.</p>
<h2>Final Gem</h2>
<p>If you don't want to add yet another dependency into your Dart/Flutter project, you can simply copy-paste the entire source code of the library I've created!</p>
<pre><code data-theme="material-theme-palenight" data-lang="dart" class='torchlight' style='background-color: #292D3E; --theme-selection-background: #00000080;'><!-- Syntax highlighted by torchlight.dev --><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 1</span><span style="color: #676E95;">/// Extensions that can be used on any type </span><span style="color: #A6ACCD;">[T]</span><span style="color: #676E95;">.</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 2</span><span style="color: #89DDFF;">extension</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">ScopeFunctionExt</span><span style="color: #89DDFF;">&lt;</span><span style="color: #FFCB6B;">T</span><span style="color: #89DDFF;">&gt;</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">on</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 3</span><span style="color: #A6ACCD;">  </span><span style="color: #676E95;">/// Calls the specified function </span><span style="color: #A6ACCD;">[block]</span><span style="color: #676E95;"> with this value as its argument and</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 4</span><span style="color: #676E95;">  /// returns </span><span style="color: #A6ACCD;">`this`</span><span style="color: #676E95;"> value.</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 5</span><span style="color: #A6ACCD;">  </span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">also</span><span style="color: #A6ACCD;">(</span><span style="color: #C792EA;">void</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> it) block) {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 6</span><span style="color: #A6ACCD;">    block</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">(this)</span><span style="color: #89DDFF;">;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 7</span><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> this</span><span style="color: #89DDFF;">;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 8</span><span style="color: #A6ACCD;">  }</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number"> 9</span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">10</span><span style="color: #A6ACCD;">  </span><span style="color: #676E95;">/// Calls the specified function </span><span style="color: #A6ACCD;">[block]</span><span style="color: #676E95;"> with </span><span style="color: #A6ACCD;">`this`</span><span style="color: #676E95;"> value as its argument and</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">11</span><span style="color: #676E95;">  /// returns its result.</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">12</span><span style="color: #A6ACCD;">  </span><span style="color: #FFCB6B;">R</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">let</span><span style="color: #A6ACCD;">&lt;</span><span style="color: #FFCB6B;">R</span><span style="color: #89DDFF;">&gt;</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">R</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> it) block) {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">13</span><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> block</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">(this)</span><span style="color: #89DDFF;">;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">14</span><span style="color: #A6ACCD;">  }</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">15</span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">16</span><span style="color: #A6ACCD;">  </span><span style="color: #676E95;">/// Returns </span><span style="color: #A6ACCD;">`this`</span><span style="color: #676E95;"> value if it satisfies the given </span><span style="color: #A6ACCD;">[predicament]</span><span style="color: #676E95;"> or null if</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">17</span><span style="color: #676E95;">  /// it doesn&#39;t.</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">18</span><span style="color: #A6ACCD;">  </span><span style="color: #FFCB6B;">T</span><span style="color: #89DDFF;">?</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">takeIf</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">bool</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> it) predicament) {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">19</span><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> predicament</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">(this) </span><span style="color: #89DDFF;">?</span><span style="color: #A6ACCD;"> this </span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">null;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">20</span><span style="color: #A6ACCD;">  }</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">21</span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">22</span><span style="color: #A6ACCD;">  </span><span style="color: #676E95;">/// Returns </span><span style="color: #A6ACCD;">`this`</span><span style="color: #676E95;"> value if it does not satisfy the given </span><span style="color: #A6ACCD;">[predicament]</span><span style="color: #676E95;"> or</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">23</span><span style="color: #676E95;">  /// null if it does.</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">24</span><span style="color: #A6ACCD;">  </span><span style="color: #FFCB6B;">T</span><span style="color: #89DDFF;">?</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">takeUnless</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">bool</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">T</span><span style="color: #A6ACCD;"> it) predicament) {</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">25</span><span style="color: #A6ACCD;">    </span><span style="color: #89DDFF;">return</span><span style="color: #A6ACCD;"> predicament</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">(this) </span><span style="color: #89DDFF;">?</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">null</span><span style="color: #A6ACCD;"> </span><span style="color: #89DDFF;">:</span><span style="color: #A6ACCD;"> this</span><span style="color: #89DDFF;">;</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">26</span><span style="color: #A6ACCD;">  }</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">27</span><span style="color: #A6ACCD;">}</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">28</span>&nbsp;</div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">29</span><span style="color: #676E95;">/// Calls the specified function </span><span style="color: #A6ACCD;">[block]</span><span style="color: #676E95;"> and returns its result.</span></div><div class='line'><span style="color:#3A3F58; text-align: right; -webkit-user-select: none; user-select: none;" class="line-number">30</span><span style="color: #FFCB6B;">R</span><span style="color: #A6ACCD;"> </span><span style="color: #82AAFF;">run</span><span style="color: #A6ACCD;">&lt;</span><span style="color: #FFCB6B;">R</span><span style="color: #89DDFF;">&gt;</span><span style="color: #A6ACCD;">(</span><span style="color: #FFCB6B;">R</span><span style="color: #A6ACCD;"> </span><span style="color: #FFCB6B;">Function</span><span style="color: #A6ACCD;">() block) </span><span style="color: #89DDFF;">=&gt;</span><span style="color: #A6ACCD;"> block</span><span style="color: #89DDFF;">.</span><span style="color: #82AAFF;">call</span><span style="color: #A6ACCD;">()</span><span style="color: #89DDFF;">;</span></div></code></pre>
<p>And thank you, for coming to the Dart side!</p>
<br><p>
    <i>
        Syntax highlighting by <a href="https://torchlight.dev/" rel="noopener nofollow">Torchlight.dev</a>
    </i>
</p>

    </div>
    <span class="sr-only">End of article</span>
</article>    </main>

    </section>

    <footer aria-label="Page footer" class="flex py-4 px-6 w-full text-center mt-auto bg-slate-100 dark:bg-gray-800">
        <div class="prose dark:prose-invert text-center mx-auto">
            <p>Built on <a href="https://github.com/hydephp/hyde">HydePHP</a> | Based on ❤️, ☕️, 🧠 + 🤖 and 😂</p>

        </div>
        <a href="#app" aria-label="Go to top of page" class="float-right">
            <button title="Scroll to top">
                <svg width="1.5rem" height="1.5rem" role="presentation" class="fill-current text-gray-500 h-6 w-6"
                     xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                    <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
                </svg>
            </button>
        </a>
    </footer>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.3/dist/cdn.min.js" integrity="sha256-gOkV4d9/FmMNEkjOzVlyM2eNAWSUXisT+1RbMTTIgXI=" crossorigin="anonymous"></script>

<script>
    function toggleTheme() {
        if (localStorage.getItem('color-theme') === 'dark' || !('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.remove("dark");
            localStorage.setItem('color-theme', 'light');
            document.getElementById('meta-color-scheme').setAttribute('content', 'light');
        } else {
            document.documentElement.classList.add("dark");
            localStorage.setItem('color-theme', 'dark');
            document.getElementById('meta-color-scheme').setAttribute('content', 'dark');
        }
    }
</script>


</body>
</html>
